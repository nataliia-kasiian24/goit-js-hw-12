{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '53410313-8865f85a69864d0c0c63fb400';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getImagesByQuery(query, page) {\n    const perPage = 15;\n\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage\n    });\n    const url = `${BASE_URL}?${params}`;\n    try {\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        throw error;\n    }\n    \n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nlet lightbox;\nif (galleryContainer) {\n    lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n}\n\nexport function showLoader() {\n    if (loader) {\n        loader.removeAttribute('hidden');\n    }\n}\n\nexport function hideLoader() {\n    if (loader) {\n        loader.setAttribute('hidden', true);\n    }\n}\n\nexport function showLoadMoreButton() {\n    if (loadMoreButton) {\n        loadMoreButton.removeAttribute('hidden');\n    }\n}\n\nexport function hideLoadMoreButton() {\n    if (loadMoreButton) {\n        loadMoreButton.setAttribute('hidden', true);\n    }\n}\n\nexport function createGallery(images) {\n    if (!galleryContainer) return;\n\n    const markup = images.map(image => {\n        return `\n            <li class=\"gallery-item\">\n                <a href=\"${image.largeImageURL}\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                </a>\n                <div class=\"info\">\n                    <p><b>Likes</b> ${image.likes}</p>\n                    <p><b>Views</b> ${image.views}</p>\n                    <p><b>Comments</b> ${image.comments}</p>\n                    <p><b>Downloads</b> ${image.downloads}</p>\n                </div>\n            </li>\n        `;\n    }).join('');\n\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n    \n    if (lightbox) {\n        lightbox.refresh();\n    }\n        \n}\nexport function clearGallery() {\n    if (galleryContainer) {\n        galleryContainer.innerHTML = '';\n    }\n}","import { getImagesByQuery } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst searchForm = document.querySelector('.form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more-btn');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\nconst perPage = 15;\n\nfunction checkLoadMoreButton() {\n    const loadedImages = currentPage * perPage;\n    if (loadedImages < totalHits) {\n        showLoadMoreButton();\n    } else {\n        hideLoadMoreButton();\n        if (totalHits > 0) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n        }\n    }\n}\n\nasync function onSearch(event) {\n    event.preventDefault();\n    const query = event.currentTarget.elements['search-text'].value.trim();\n    if (query === '') {\n        iziToast.error({\n            message: 'Search field cannot be empty!',\n            position: 'topRight',\n        });\n        return;\n    }\n    currentPage = 1;\n    currentQuery = query;\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    event.currentTarget.reset();\n    \n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        totalHits = data.totalHits;\n        \n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n        } else {\n            createGallery(data.hits);\n            checkLoadMoreButton();\n        }\n\n    } catch (error) {\n        console.error(error);\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to fetch images. Please check your network or API key.',\n            position: 'topRight',\n        });\n    } finally {\n        hideLoader();\n        event.currentTarget.reset();\n    }\n}\n\nasync function onLoadMore() {\n    currentPage += 1;\n    showLoader();\n    hideLoadMoreButton();\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        createGallery(data.hits);\n        checkLoadMoreButton();\n        const firstGalleryItem = document.querySelector('.gallery-item');\n\n        if (firstGalleryItem) {\n            const itemHeight = firstGalleryItem.getBoundingClientRect().height;\n            window.scrollBy({\n                top: itemHeight * 2,\n                behavior: 'smooth',\n            })\n        }\n    }catch (error) {\n        console.error(error);\n        iziToast.error({\n            title: 'Error',\n            message: 'Failed to load more images.',\n            position: 'topRight',\n        });\n        currentPage -= 1; \n        showLoadMoreButton();\n    } finally {\n        hideLoader();\n    }\n}\n\n\nif (searchForm) {\n    searchForm.addEventListener('submit', onSearch);\n}\n\nif (loadMoreButton) {\n    loadMoreButton.addEventListener('click', onLoadMore);\n}"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","url","axios","error","galleryContainer","loader","loadMoreButton","lightbox","SimpleLightbox","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","createGallery","images","markup","image","clearGallery","searchForm","currentPage","currentQuery","totalHits","perPage","checkLoadMoreButton","iziToast","onSearch","event","data","onLoadMore","firstGalleryItem","itemHeight"],"mappings":"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"}